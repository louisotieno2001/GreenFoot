<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/index.css">
    <link rel="icon" href="./res/logo.jpeg" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons" />
    <title>Home</title>
    <style>
        body {
            display: flex;
            overflow-y: hidden;
            background-color: #424242;
            color: aliceblue;
            margin: 0;
        }

        .sidebar {
            height: 100vh;
            width: 80px;
            background-color: #212121;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
        }

        .sidebar a {
            text-decoration: none;
            color: #333;
            font-size: 14px;
            margin: 10px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: aliceblue;
            margin-top: 50px;
        }

        .tabs-content {
            display: flex;
            flex-grow: 1;
            background-color: #424242;
        }

        .tab-content {
            display: none;
            flex-grow: 1;
            text-align: center;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        .response-area {
            display: flex;
            align-items: center;
            flex-direction: column;
            text-align: center;
            margin-right: 100px;
        }

        .result-area {
            display: flex;
            align-items: center;
            flex-direction: column;
            text-align: center;
            margin-left: 300px;
        }

        .logo {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            background-image: url(../res/logo.jpeg);
            background-position: center;
            background-size: cover;
            margin-bottom: 10px;
        }

        .prompt-area {
            display: flex;
            align-items: center;
            margin-top: 140px;
            margin-left: 120px;
            margin-right: 180px;
        }

        .material-icons {
            font-size: 24px;
            color: aliceblue;
        }

        #mic {
            background-color: #616161;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
        }

        #arrow {
            background-color: #616161;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
        }

        #prompt-input {
            margin: 0 10px;
            border: 1px solid #757575;
            border-radius: 8px;
            flex-grow: 1;
            background-color: #424242;
            padding: 1em;
            width: 440px;
            color: aliceblue;
            font-size: larger;
        }

        #prompt-input:focus {
            outline: none;
            border: 1px solid #757575;
        }

        .sample-questions {
            display: flex;
            flex-direction: row;
            margin-left: 350px;
        }

        .sample-questions p {
            padding: 1em;
            margin: 2px;
            border-radius: 8px;
            border: 1px solid #757575;
            width: 200px;
            cursor: pointer;
            color: aliceblue;
        }

        .mic-gif {
            display: none;
        }
    </style>
</head>

<body>
    <div class="sidebar">
        <a href="#" onclick="showTab('prompts')"><span class="material-icons">home</span> Home</a>
        <a href="#" onclick="showTab('profile')"><span class="material-icons">person</span> Profile</a>
        <a href="#"><span class="material-icons">logout</span> Logout</a>
    </div>

    <div class="tabs-content">
        <div class="mic-gif" id="mic-gif"></div>
        <div id="prompts" class="tab-content active">

            <div class="response-area" id="response-area">
                <div class="logo"></div>
                <h1>How can I help you today?</h1>
            </div>
            <div class="sample-questions" id="sample-questions">
                <p id="carbon-definition">Define carbon footprint?</p>
                <p id="env-definition">Define environment</p>
            </div>
            <div class="result-area" id="result-area"></div>
            <div class="prompt-area" id="prompt-area">
                <span class="material-icons" id="mic" title="Speak to GreenFoot">mic</span>
                <input type="text" id="prompt-input" placeholder="How can I help you today?">
                <span class="material-icons" id="arrow" title="Send message to GreenFoot">arrow_circle_up</span>
            </div>
        </div>

        <div id="profile" class="tab-content">
            <!-- Add your profile content here -->
            <h1>Profile</h1>
            <div class="profile-photo">

            </div>
            <div class="your-details">
                <h1>Louis Ochieng</h1>
                <h3>ELITE | 1.3K POINTS</h3>
            </div>
            <div class="achievements"></div>

        </div>
    </div>
    <script>
        function showTab(tabId) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show the selected tab
            const selectedTab = document.getElementById(tabId);
            selectedTab.classList.add('active');
        }

        // Initially show the 'prompts' tab
        showTab('prompts');

        function showMic() {
            const micGifContainer = document.getElementById('mic-gif');
            const mic = document.getElementById('mic');
            const promptArea = document.getElementById('prompt-area');
            const sampleQuestions = document.getElementById('sample-questions');
            const responseArea = document.getElementById('response-area');
            const profile = document.getElementById('profile');
            const prompts = document.getElementById('prompts');

            // Create a new image element
            const micGif = new Image();
            micGif.src = '../res/mic.gif'; // Replace with your mic gif URL
            micGif.alt = 'Microphone Gif';
            micGif.classList.add('my-gif'); // Replace 'my-gif' with your desired class

            // Clear any previous content in micGifContainer
            micGifContainer.innerHTML = '';

            // Append the mic gif to the container
            micGifContainer.appendChild(micGif);

            // Set styles for micGifContainer
            micGifContainer.style.backgroundColor = 'black';
            micGifContainer.style.width = '100%';
            micGifContainer.style.backgroundSize = 'cover';
            micGifContainer.style.backgroundPosition = 'center';

            // Center the mic gif on the page
            micGifContainer.style.display = 'flex';
            micGifContainer.style.justifyContent = 'center';
            micGifContainer.style.alignItems = 'center';
            micGifContainer.style.width = '100%';

            // Set body background color to black
            document.body.style.backgroundColor = 'black';

            // Remove space above micGifContainer
            micGifContainer.style.marginTop = '0px';

            // Hide other elements
            promptArea.style.display = 'none';
            sampleQuestions.style.display = 'none';
            responseArea.style.display = 'none';
            profile.style.display = 'none';
            prompts.style.display = 'none';
        }

        mic.addEventListener('click', async (e) => {
            e.preventDefault();
            showMic();
        });

        const cfDef = document.getElementById('carbon-definition');
        const envDef = document.getElementById('env-definition');
        const promptArea = document.getElementById('prompt-area');
        const sampleQuestions = document.getElementById('sample-questions');
        const result = document.getElementById('result-area');
        const responseArea = document.getElementById('response-area');

        function answers() {
            sampleQuestions.style.display = 'none';
            responseArea.style.display = 'none';
            result.style.width = '600px';
            result.style.fontFamily = 'sans-serif';
            result.style.fontSize = 'larger';
            result.style.fontWeight = 'bold';
        }

        cfDef.addEventListener("click", async (e) => {
            e.preventDefault();
            answers();
            // Create a new paragraph element
            const cfParagraph = document.createElement('p');
            // Set the text content for the paragraph
            cfParagraph.textContent = "Definition of Carbon Footprint: Carbon footprint is the total amount of greenhouse gases, specifically carbon dioxide, and other carbon compounds emitted directly or indirectly by human activities.";
            // Append the paragraph to the result area
            result.appendChild(cfParagraph);
            result.style.textAlign = 'center'
        });

        envDef.addEventListener("click", async (e) => {
            e.preventDefault();
            // Create a new paragraph element
            answers();
            const envParagraph = document.createElement('p');
            envParagraph.style.alignContent = 'center';
            // Set the text content for the paragraph
            envParagraph.textContent = "Definition of Environment: The environment refers to the surroundings in which organisms live, grow, and interact. It includes both living (biotic) and non-living (abiotic) components, such as air, water, soil, and ecosystems.";
            // Append the paragraph to the result area
            result.appendChild(envParagraph);
            result.style.textAlign = 'center'
        });

        // ChatGpt stuff

        const arrowIcon = document.getElementById('arrow');
        const promptInput = document.getElementById('prompt-input');
        const resultArea = document.getElementById('result-area');

        arrowIcon.addEventListener('click', async () => {
            const userQuery = promptInput.value.trim();

            // Check if the user entered a valid query
            if (userQuery) {
                // Reset result area
                resultArea.innerHTML = '';

                // Call a function to send the query to ChatGPT and handle the response
                await sendToChatGPT(userQuery);
            } else {
                // Handle case when the input is empty
                alert('Please enter a valid query.');
            }
        });
        
        

        function displayChatGPTResponse(response) {
            // Display the response in the result area
            const responseParagraph = document.createElement('p');
            responseParagraph.textContent = response;
            resultArea.appendChild(responseParagraph);
            resultArea.style.textAlign = 'center';
        }

    </script>
</body>

</html>